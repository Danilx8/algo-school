Не запуская программу, скажите, как отработает такой цикл?

while (stack.size() > 0)
    stack.pop()
    stack.pop()

Если в стеке чётноке количество элементов, то отработает корректно. Если нет - выдаст ошибку на последней итерации
(последний элемент сперва удалится при первом вызове, а вторй вызов приведёт к ошибке)